#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../dbd/pmacCoord_vdct.dbd")
#! DBDEND


# # \file
# # This template allows setting of variables for a 3jack CS. The 3 jacks can
# # be constructed in any geometry, and should be numbered in a clockwise order 
# # looking from the top with J1 having the smallest Z value of the jacks
# # It requires PROG10_CS_motion.pmc and an instantiation of CS_3jack.pmc with 
# # the variables shown in the image below:
# # \image html 3jack-help.png "Setup of 3 jack CS"
# # Build instructions for an example IOC are available 
# # \ref build_instructions_CS3jack "here", with a pmc file containing 
# # the CS definition available in iocs/CS3jack/defs.pmc
# % macro, __doc__, Supporting template that allows setting of variables for a 
# 3jack CS 
# % macro, P, Pv Prefix
# % macro, PORT, Motor controller serial port
# % macro, COORD, Co-ordinate system number
# % macro, PREC, Precision to display variables
# % macro, J1PV, Pv of real Jack1 motor, e.g. $(P):J1
# % macro, J2PV, Pv of real Jack1 motor, e.g. $(P):J2
# % macro, J3PV, Pv of real Jack1 motor, e.g. $(P):J3
# % macro, name, Object name and gui association name
# This associates an edm screen with the template
# % gui, $(name=), edm, 3jack.edl, 3jack=$(P)
# # This record will zero J1, J2 and J3 when processed
record(fanout, "$(P):ZERO") {
  field(LNK1, "$(P):ZEROJ1")
  field(LNK2, "$(P):ZEROJ2")
  field(LNK3, "$(P):ZEROJ3")
}

record(calcout, "$(P):ZEROJ1") {
  field(CALC, "-A")
  field(INPA, "$(J1PV=$(P):J1).DRBV")
  field(OUT, "$(J1PV=$(P):J1).OFF PP")
}

record(calcout, "$(P):ZEROJ2") {
  field(CALC, "-A")
  field(INPA, "$(J2PV=$(P):J2).DRBV")
  field(OUT, "$(J2PV=$(P):J2).OFF PP")
}

record(calcout, "$(P):ZEROJ3") {
  field(CALC, "-A")
  field(INPA, "$(J3PV=$(P):J3).DRBV")
  field(OUT, "$(J3PV=$(P):J3).OFF PP")
}

expand("pmacVariableWriteSync.vdb", pmacVariableWriteSync1) {
  macro(VAR, "&$(COORD)Q20")
  macro(Q, ":J1X")
  macro(EGU, "mm")
  macro(PREC, "$(PREC=3)")
}

expand("pmacVariableWriteSync.vdb", pmacVariableWriteSync2) {
  macro(VAR, "&$(COORD)Q21")
  macro(Q, ":J1Z")
  macro(EGU, "mm")
  macro(PREC, "$(PREC=3)")
}

expand("pmacVariableWriteSync.vdb", pmacVariableWriteSync3) {
  macro(VAR, "&$(COORD)Q22")
  macro(Q, ":J2X")
  macro(EGU, "mm")
  macro(PREC, "$(PREC=3)")
}

expand("pmacVariableWriteSync.vdb", pmacVariableWriteSync4) {
  macro(VAR, "&$(COORD)Q23")
  macro(Q, ":J2Z")
  macro(EGU, "mm")
  macro(PREC, "$(PREC=3)")
}

expand("pmacVariableWriteSync.vdb", pmacVariableWriteSync5) {
  macro(VAR, "&$(COORD)Q24")
  macro(Q, ":J3X")
  macro(EGU, "mm")
  macro(PREC, "$(PREC=3)")
}

expand("pmacVariableWriteSync.vdb", pmacVariableWriteSync6) {
  macro(VAR, "&$(COORD)Q25")
  macro(Q, ":J3Z")
  macro(EGU, "mm")
  macro(PREC, "$(PREC=3)")
}

expand("pmacVariableWriteSync.vdb", pmacVariableWriteSync11) {
  macro(VAR, "&$(COORD)Q30")
  macro(Q, ":MD")
  macro(EGU, "mm")
  macro(PREC, "$(PREC=3)")
}

expand("pmacVariableWriteSync.vdb", pmacVariableWriteSync12) {
  macro(VAR, "&$(COORD)Q31")
  macro(Q, ":MCX")
  macro(EGU, "mm")
  macro(PREC, "$(PREC=3)")
}

expand("pmacVariableWriteSync.vdb", pmacVariableWriteSync13) {
  macro(VAR, "&$(COORD)Q32")
  macro(Q, ":MCZ")
  macro(EGU, "mm")
  macro(PREC, "$(PREC=3)")
}

#! Further lines contain data used by VisualDCT
#! View(175,553,1.0)
#! Record("$(P):ZERO",220,702,0,0,"$(P):ZERO")
#! Field("$(P):ZERO.LNK1",16777215,1,"$(P):ZERO.LNK1")
#! Link("$(P):ZERO.LNK1","$(P):ZEROJ1")
#! Field("$(P):ZERO.LNK2",16777215,1,"$(P):ZERO.LNK2")
#! Link("$(P):ZERO.LNK2","$(P):ZEROJ2")
#! Field("$(P):ZERO.LNK3",16777215,1,"$(P):ZERO.LNK3")
#! Link("$(P):ZERO.LNK3","$(P):ZEROJ3")
#! Record("$(P):ZEROJ1",520,702,0,0,"$(P):ZEROJ1")
#! Field("$(P):ZEROJ1.INPA",16777215,1,"$(P):ZEROJ1.INPA")
#! Field("$(P):ZEROJ1.OUT",16777215,1,"$(P):ZEROJ1.OUT")
#! Record("$(P):ZEROJ2",520,862,0,0,"$(P):ZEROJ2")
#! Field("$(P):ZEROJ2.INPA",16777215,1,"$(P):ZEROJ2.INPA")
#! Field("$(P):ZEROJ2.OUT",16777215,1,"$(P):ZEROJ2.OUT")
#! Record("$(P):ZEROJ3",500,1022,0,0,"$(P):ZEROJ3")
#! Field("$(P):ZEROJ3.INPA",16777215,1,"$(P):ZEROJ3.INPA")
#! Field("$(P):ZEROJ3.OUT",16777215,1,"$(P):ZEROJ3.OUT")

#! TemplateInstance("pmacVariableWriteSync1",740,580,0,"")
#! TemplateField("pmacVariableWriteSync1","VAR",16777215,0,1)
#! TemplateField("pmacVariableWriteSync1","EGU",16777215,0,1)
#! TemplateField("pmacVariableWriteSync1","Q",16777215,0,1)
#! TemplateField("pmacVariableWriteSync1","PORT",16777215,0,1)
#! TemplateField("pmacVariableWriteSync1","P",16777215,0,1)
#! TemplateField("pmacVariableWriteSync1","PREC",16777215,0,1)


#! TemplateInstance("pmacVariableWriteSync2",960,580,0,"")
#! TemplateField("pmacVariableWriteSync2","VAR",16777215,0,1)
#! TemplateField("pmacVariableWriteSync2","EGU",16777215,0,1)
#! TemplateField("pmacVariableWriteSync2","Q",16777215,0,1)
#! TemplateField("pmacVariableWriteSync2","PORT",16777215,0,1)
#! TemplateField("pmacVariableWriteSync2","P",16777215,0,1)
#! TemplateField("pmacVariableWriteSync2","PREC",16777215,0,1)


#! TemplateInstance("pmacVariableWriteSync3",1180,580,0,"")
#! TemplateField("pmacVariableWriteSync3","VAR",16777215,0,1)
#! TemplateField("pmacVariableWriteSync3","EGU",16777215,0,1)
#! TemplateField("pmacVariableWriteSync3","Q",16777215,0,1)
#! TemplateField("pmacVariableWriteSync3","PORT",16777215,0,1)
#! TemplateField("pmacVariableWriteSync3","P",16777215,0,1)
#! TemplateField("pmacVariableWriteSync3","PREC",16777215,0,1)


#! TemplateInstance("pmacVariableWriteSync4",1400,580,0,"")
#! TemplateField("pmacVariableWriteSync4","VAR",16777215,0,1)
#! TemplateField("pmacVariableWriteSync4","EGU",16777215,0,1)
#! TemplateField("pmacVariableWriteSync4","Q",16777215,0,1)
#! TemplateField("pmacVariableWriteSync4","PORT",16777215,0,1)
#! TemplateField("pmacVariableWriteSync4","P",16777215,0,1)
#! TemplateField("pmacVariableWriteSync4","PREC",16777215,0,1)


#! TemplateInstance("pmacVariableWriteSync5",1620,580,0,"")
#! TemplateField("pmacVariableWriteSync5","VAR",16777215,0,1)
#! TemplateField("pmacVariableWriteSync5","EGU",16777215,0,1)
#! TemplateField("pmacVariableWriteSync5","Q",16777215,0,1)
#! TemplateField("pmacVariableWriteSync5","PORT",16777215,0,1)
#! TemplateField("pmacVariableWriteSync5","P",16777215,0,1)
#! TemplateField("pmacVariableWriteSync5","PREC",16777215,0,1)


#! TemplateInstance("pmacVariableWriteSync6",740,920,0,"")
#! TemplateField("pmacVariableWriteSync6","VAR",16777215,0,1)
#! TemplateField("pmacVariableWriteSync6","EGU",16777215,0,1)
#! TemplateField("pmacVariableWriteSync6","Q",16777215,0,1)
#! TemplateField("pmacVariableWriteSync6","PORT",16777215,0,1)
#! TemplateField("pmacVariableWriteSync6","P",16777215,0,1)
#! TemplateField("pmacVariableWriteSync6","PREC",16777215,0,1)


#! TemplateInstance("pmacVariableWriteSync11",740,1260,0,"")
#! TemplateField("pmacVariableWriteSync11","VAR",16777215,0,1)
#! TemplateField("pmacVariableWriteSync11","EGU",16777215,0,1)
#! TemplateField("pmacVariableWriteSync11","Q",16777215,0,1)
#! TemplateField("pmacVariableWriteSync11","PORT",16777215,0,1)
#! TemplateField("pmacVariableWriteSync11","P",16777215,0,1)
#! TemplateField("pmacVariableWriteSync11","PREC",16777215,0,1)


#! TemplateInstance("pmacVariableWriteSync12",960,1260,0,"")
#! TemplateField("pmacVariableWriteSync12","VAR",16777215,0,1)
#! TemplateField("pmacVariableWriteSync12","EGU",16777215,0,1)
#! TemplateField("pmacVariableWriteSync12","Q",16777215,0,1)
#! TemplateField("pmacVariableWriteSync12","PORT",16777215,0,1)
#! TemplateField("pmacVariableWriteSync12","P",16777215,0,1)
#! TemplateField("pmacVariableWriteSync12","PREC",16777215,0,1)


#! TemplateInstance("pmacVariableWriteSync13",1180,1260,0,"")
#! TemplateField("pmacVariableWriteSync13","VAR",16777215,0,1)
#! TemplateField("pmacVariableWriteSync13","EGU",16777215,0,1)
#! TemplateField("pmacVariableWriteSync13","Q",16777215,0,1)
#! TemplateField("pmacVariableWriteSync13","PORT",16777215,0,1)
#! TemplateField("pmacVariableWriteSync13","P",16777215,0,1)
#! TemplateField("pmacVariableWriteSync13","PREC",16777215,0,1)

