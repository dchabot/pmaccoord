<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>pmacCoord: /dls_sw/prod/R3.14.11/support/pmacCoord/1-11/pmacCoordApp/src/pmacAsynCoord.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_4a91758f3904bf9cb5b74f6b9e00a446.html">pmacCoordApp</a>      </li>
      <li><a class="el" href="dir_66bc7fc3674e65d6e8028c7698760912.html">src</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>pmacAsynCoord.c File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &lt;stddef.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdarg.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &quot;paramLib.h&quot;</code><br/>
<code>#include &quot;epicsFindSymbol.h&quot;</code><br/>
<code>#include &quot;epicsTime.h&quot;</code><br/>
<code>#include &quot;epicsThread.h&quot;</code><br/>
<code>#include &quot;epicsEvent.h&quot;</code><br/>
<code>#include &quot;epicsMutex.h&quot;</code><br/>
<code>#include &quot;ellLib.h&quot;</code><br/>
<code>#include &quot;drvSup.h&quot;</code><br/>
<code>#include &quot;epicsExport.h&quot;</code><br/>
<code>#include &quot;motor_interface.h&quot;</code><br/>
<code>#include &quot;asynDriver.h&quot;</code><br/>
<code>#include &quot;asynOctetSyncIO.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="pmacAsynCoord_8h_source.html">pmacAsynCoord.h</a>&quot;</code><br/>

<p><a href="pmacAsynCoord_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrvPmac.html">drvPmac</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmotorAxisHandle.html">motorAxisHandle</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a6566a261547e1921be9f9f9de567c55e">DEFINE_MOTOR_PROTOTYPES</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#afa71ec589113b6ec938232e0f17ccce6">TRACE_FLOW</a>&nbsp;&nbsp;&nbsp;motorAxisTraceFlow</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#aae97d343eadb83d70fbb23a160d8a0bd">TRACE_DRIVER</a>&nbsp;&nbsp;&nbsp;motorAxisTraceIODriver</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a7c12181b2e8dc912219651ff42d22e42">TRACE_ERROR</a>&nbsp;&nbsp;&nbsp;motorAxisTraceError</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(a, b)&nbsp;&nbsp;&nbsp;((a)&gt;(b)? (a): (b))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(a, b)&nbsp;&nbsp;&nbsp;((a)&lt;(b)? (a): (b))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a953afaee9881acee77e9109bf603a4a4">NAXES</a>&nbsp;&nbsp;&nbsp;9</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a5342c8bd313637155e5b9a64441aafd9">NAME</a>(pAxis)&nbsp;&nbsp;&nbsp;(<a class="el" href="pmacAsynCoord_8c.html#aee2c30cf8adda4b89a2d5b09f3efe0ac">axisName</a>[(pAxis-&gt;axis)])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a91cf38a388db62435e273c462a702f02">CSVAR</a>(pAxis)&nbsp;&nbsp;&nbsp;(pAxis-&gt;coord_system + 50)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#abce7fc0a540d181cb99d750717f81aa9">DEMAND</a>&nbsp;&nbsp;&nbsp;&quot;Q7%d&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#af043012a4ddcdf22d7d07436a966ed2c">READBACK</a>&nbsp;&nbsp;&nbsp;&quot;Q8%d&quot;</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structdrvPmac.html">drvPmac</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#ac2dd5c0a4d0b94391faaed3798ac78cc">PMACDRV_ID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structdrvPmac.html">drvPmac</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a4661730d0e71cdc7b9e4e9451e0e9ce8">drvPmac_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structmotorAxisHandle.html">motorAxisHandle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#ae3b68cfbd8ff7ce6e36d46c7716f0bd3">motorAxis</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#acd42eda8e2b6e23fc2f88d2f0082300a">epicsExportAddress</a> (drvet, <a class="el" href="pmacAsynCoord_8c.html#a5a7eb4db04184252e653ecf470969b22">pmacAsynCoord</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a9a97d74d1dbcc8b03d2b0f33a65f068b">asynMatch</a> (asynUser *pasynUser, char *checkport, int checkaddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a1d55a371bd1c7db792f8ffd8a9beb095">pmacAsynCoordCreate</a> (char *port, int addr, int cs, int ref, int program)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a5817f705d4fd6a126f8dd3eee38214d1">pmacSetDefaultCoordSteps</a> (double defaultSteps)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#af1997e306c22cd58c68eb94ddfcf7c5a">pmacSetCoordStepsPerUnit</a> (int ref, int axis, double stepsPerUnit)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a18d3fa7112cbdc2224661cd1af5cea10">pmacSetCoordMovingPollPeriod</a> (int ref, int movingPollPeriod)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a4485eb9a372c5eb5d2477d4f311e0310">pmacSetCoordIdlePollPeriod</a> (int ref, int idlePollPeriod)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">motorAxisDrvSET_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#a5a7eb4db04184252e653ecf470969b22">pmacAsynCoord</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmacAsynCoord_8c.html#aee2c30cf8adda4b89a2d5b09f3efe0ac">axisName</a> [] = {' ', 'A','B','C','U','V','W','X','Y','Z'}</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This is a driver for Delta-Tau PMAC Coordinate Systems, designed to interface with the "motor API" style interface that allows drivers to be used with the standard asyn device and driver support for the motor record</p>
<p>To use this driver, you should create a co-ordinate system with kinematics and a position reporting PLC as detailed in the <a href="http://www.deltatau.com/manuals/pdfs/TURBO%20PMAC%20USER%20MANUAL.pdf">Delta Tau Turbo PMAC User Manual</a>, along with a position reporting PLC. You should follow the conventions set out in the <a href="../BLS-GEN-CTRL-0005.doc">DLS PMAC Programming Standards</a></p>
<p>The driver uses the following interface:</p>
<ul>
<li>CS Axes A, B, C, U, V, W, X, Y, Z are mapped to Q1..9 in kinematic code by the PMAC</li>
<li>The EPICS driver expects the position reporting PLC to report the positions of these axes on Q81..89, in EGUs</li>
<li>The driver applies a scale factor (10000.0 by default, modified by pmacSetCoordStepsPerUnit). This is needed because the motor record can only drive in integer "steps". The motor record needs to have the inverse of this scale factor in MRES (0.0001 by default)</li>
<li>The driver is numbered from 0, so the motor record with address 0 connects to axis A which has readback in Q81</li>
<li>When a move is demanded, the following is done:<ul>
<li>The CS is aborted to put the motors in closed loop mode</li>
<li>Isx87 (Acceleration) is set to the motor record VELO</li>
<li>Isx89 (Feedrate) is set to VELO / ACCL * 1000</li>
<li>Demand value in EGUs is written to the relevant Q Variable in Q71..79</li>
<li>Motion program specified in the startup script (probably PROG_10_CS_motion.pmc) is run.</li>
</ul>
</li>
</ul>
<p>The following code will open an IP Port to an ethernet PMAC, then wrap CS2 in a driver with ref 0 running prog 10, polling for position every 0.5s when the motors aren't moving, and every 0.1s when they are, and set the scale factor for X on CS2 to 100000.0, so the relevant motor record will need an MRES of 1.0/100000.0 </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"># Create IP Port (IPPort, IPAddr)</span>
<span class="preprocessor"></span><span class="preprocessor"># This function lives in tpmac</span>
<span class="preprocessor"></span>pmacAsynIPConfigure(<span class="stringliteral">&quot;BRICK1port&quot;</span>, <span class="stringliteral">&quot;172.23.243.156:1025&quot;</span>)

<span class="preprocessor"># Create CS (ControllerPort, Addr, CSNumber, CSRef, Prog)</span>
<span class="preprocessor"></span><a class="code" href="pmacAsynCoord_8c.html#a1d55a371bd1c7db792f8ffd8a9beb095">pmacAsynCoordCreate</a>(<span class="stringliteral">&quot;BRICK1port&quot;</span>, 0, 2, 0, 10)
<span class="preprocessor"># Configure CS (PortName, DriverName, CSRef, NAxes)</span>
<span class="preprocessor"></span>drvAsynMotorConfigure(<span class="stringliteral">&quot;BRICK1CS2&quot;</span>, <span class="stringliteral">&quot;pmacAsynCoord&quot;</span>, 0, 9)
<span class="preprocessor"># Set scale factor (CS_Ref, axis, stepsPerUnit)</span>
<span class="preprocessor"></span><a class="code" href="pmacAsynCoord_8c.html#af1997e306c22cd58c68eb94ddfcf7c5a">pmacSetCoordStepsPerUnit</a>(0, 6, 100000.0)
<span class="preprocessor"># Set Idle and Moving poll periods (CS_Ref, PeriodMilliSeconds)</span>
<span class="preprocessor"></span><a class="code" href="pmacAsynCoord_8c.html#a4485eb9a372c5eb5d2477d4f311e0310">pmacSetCoordIdlePollPeriod</a>(0, 500)
<a class="code" href="pmacAsynCoord_8c.html#a18d3fa7112cbdc2224661cd1af5cea10">pmacSetCoordMovingPollPeriod</a>(0, 100)
</pre></div> 
<p>Definition in file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a91cf38a388db62435e273c462a702f02"></a><!-- doxytag: member="pmacAsynCoord.c::CSVAR" ref="a91cf38a388db62435e273c462a702f02" args="(pAxis)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CSVAR</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">pAxis</td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(pAxis-&gt;coord_system + 50)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00158">158</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6566a261547e1921be9f9f9de567c55e"></a><!-- doxytag: member="pmacAsynCoord.c::DEFINE_MOTOR_PROTOTYPES" ref="a6566a261547e1921be9f9f9de567c55e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFINE_MOTOR_PROTOTYPES&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00077">77</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="abce7fc0a540d181cb99d750717f81aa9"></a><!-- doxytag: member="pmacAsynCoord.c::DEMAND" ref="abce7fc0a540d181cb99d750717f81aa9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEMAND&nbsp;&nbsp;&nbsp;&quot;Q7%d&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00160">160</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="afa99ec4acc4ecb2dc3c2d05da15d0e3f"></a><!-- doxytag: member="pmacAsynCoord.c::MAX" ref="afa99ec4acc4ecb2dc3c2d05da15d0e3f" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">b</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>&nbsp;&nbsp;&nbsp;((a)&gt;(b)? (a): (b))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00152">152</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3acffbd305ee72dcd4593c0d8af64a4f"></a><!-- doxytag: member="pmacAsynCoord.c::MIN" ref="a3acffbd305ee72dcd4593c0d8af64a4f" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">b</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>&nbsp;&nbsp;&nbsp;((a)&lt;(b)? (a): (b))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00153">153</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5342c8bd313637155e5b9a64441aafd9"></a><!-- doxytag: member="pmacAsynCoord.c::NAME" ref="a5342c8bd313637155e5b9a64441aafd9" args="(pAxis)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NAME</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">pAxis</td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(<a class="el" href="pmacAsynCoord_8c.html#aee2c30cf8adda4b89a2d5b09f3efe0ac">axisName</a>[(pAxis-&gt;axis)])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00157">157</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="a953afaee9881acee77e9109bf603a4a4"></a><!-- doxytag: member="pmacAsynCoord.c::NAXES" ref="a953afaee9881acee77e9109bf603a4a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NAXES&nbsp;&nbsp;&nbsp;9</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00156">156</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="af043012a4ddcdf22d7d07436a966ed2c"></a><!-- doxytag: member="pmacAsynCoord.c::READBACK" ref="af043012a4ddcdf22d7d07436a966ed2c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READBACK&nbsp;&nbsp;&nbsp;&quot;Q8%d&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00162">162</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="aae97d343eadb83d70fbb23a160d8a0bd"></a><!-- doxytag: member="pmacAsynCoord.c::TRACE_DRIVER" ref="aae97d343eadb83d70fbb23a160d8a0bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRACE_DRIVER&nbsp;&nbsp;&nbsp;motorAxisTraceIODriver</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00149">149</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7c12181b2e8dc912219651ff42d22e42"></a><!-- doxytag: member="pmacAsynCoord.c::TRACE_ERROR" ref="a7c12181b2e8dc912219651ff42d22e42" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRACE_ERROR&nbsp;&nbsp;&nbsp;motorAxisTraceError</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00150">150</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="afa71ec589113b6ec938232e0f17ccce6"></a><!-- doxytag: member="pmacAsynCoord.c::TRACE_FLOW" ref="afa71ec589113b6ec938232e0f17ccce6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRACE_FLOW&nbsp;&nbsp;&nbsp;motorAxisTraceFlow</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00148">148</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a4661730d0e71cdc7b9e4e9451e0e9ce8"></a><!-- doxytag: member="pmacAsynCoord.c::drvPmac_t" ref="a4661730d0e71cdc7b9e4e9451e0e9ce8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structdrvPmac.html">drvPmac</a>  <a class="el" href="structdrvPmac.html">drvPmac_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae3b68cfbd8ff7ce6e36d46c7716f0bd3"></a><!-- doxytag: member="pmacAsynCoord.c::motorAxis" ref="ae3b68cfbd8ff7ce6e36d46c7716f0bd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structmotorAxisHandle.html">motorAxisHandle</a>  <a class="el" href="structmotorAxisHandle.html">motorAxis</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac2dd5c0a4d0b94391faaed3798ac78cc"></a><!-- doxytag: member="pmacAsynCoord.c::PMACDRV_ID" ref="ac2dd5c0a4d0b94391faaed3798ac78cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structdrvPmac.html">drvPmac</a>* <a class="el" href="structdrvPmac.html">PMACDRV_ID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00104">104</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9a97d74d1dbcc8b03d2b0f33a65f068b"></a><!-- doxytag: member="pmacAsynCoord.c::asynMatch" ref="a9a97d74d1dbcc8b03d2b0f33a65f068b" args="(asynUser *pasynUser, char *checkport, int checkaddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int asynMatch </td>
          <td>(</td>
          <td class="paramtype">asynUser *&nbsp;</td>
          <td class="paramname"> <em>pasynUser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>checkport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>checkaddr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Test if a connected pasynUser matches a given port and address </p>

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00738">738</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="acd42eda8e2b6e23fc2f88d2f0082300a"></a><!-- doxytag: member="pmacAsynCoord.c::epicsExportAddress" ref="acd42eda8e2b6e23fc2f88d2f0082300a" args="(drvet, pmacAsynCoord)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">epicsExportAddress </td>
          <td>(</td>
          <td class="paramtype">drvet&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pmacAsynCoord_8c.html#a5a7eb4db04184252e653ecf470969b22">pmacAsynCoord</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1d55a371bd1c7db792f8ffd8a9beb095"></a><!-- doxytag: member="pmacAsynCoord.c::pmacAsynCoordCreate" ref="a1d55a371bd1c7db792f8ffd8a9beb095" args="(char *port, int addr, int cs, int ref, int program)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pmacAsynCoordCreate </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>program</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a driver instance to communicate with a given coordinate system</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>The Asyn port used to communicate with the PMAC card </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The Asyn address of the PMAC (usually 0) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cs</em>&nbsp;</td><td>The co-ordinate system to connect to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ref</em>&nbsp;</td><td>A unique reference, used by the higher layer software to reference this C.S. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>program</em>&nbsp;</td><td>The PMAC program number to run to move the C.S. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00760">760</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4485eb9a372c5eb5d2477d4f311e0310"></a><!-- doxytag: member="pmacAsynCoord.c::pmacSetCoordIdlePollPeriod" ref="a4485eb9a372c5eb5d2477d4f311e0310" args="(int ref, int idlePollPeriod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pmacSetCoordIdlePollPeriod </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idlePollPeriod</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function to set the idlePollPeriod time to use when polling the controller when there is no motion. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ref</em>&nbsp;</td><td>Numerical ID of the coordinate system. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idlePollPeriod</em>&nbsp;</td><td>The period in miliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l01013">1013</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="a18d3fa7112cbdc2224661cd1af5cea10"></a><!-- doxytag: member="pmacAsynCoord.c::pmacSetCoordMovingPollPeriod" ref="a18d3fa7112cbdc2224661cd1af5cea10" args="(int ref, int movingPollPeriod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pmacSetCoordMovingPollPeriod </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>movingPollPeriod</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function to set the movingPollPeriod time to use when polling the controller during a move. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ref</em>&nbsp;</td><td>Numerical ID of the coordinate system. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>movingPollPeriod</em>&nbsp;</td><td>The period in miliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00981">981</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="af1997e306c22cd58c68eb94ddfcf7c5a"></a><!-- doxytag: member="pmacAsynCoord.c::pmacSetCoordStepsPerUnit" ref="af1997e306c22cd58c68eb94ddfcf7c5a" args="(int ref, int axis, double stepsPerUnit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pmacSetCoordStepsPerUnit </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>axis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>stepsPerUnit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function to set the step size per user unit for a coordinate system. This enables us to work in user units on the controller. Call this function at IOC shell optionally after <a class="el" href="pmacAsynCoord_8c.html#a1d55a371bd1c7db792f8ffd8a9beb095">pmacAsynCoordCreate()</a>, and any call of <a class="el" href="pmacAsynCoord_8c.html#a5817f705d4fd6a126f8dd3eee38214d1">pmacSetDefaultCoordSteps()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ref</em>&nbsp;</td><td>The CS ref </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>axis</em>&nbsp;</td><td>The axis number (0 based). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stepsPerUnit</em>&nbsp;</td><td>Number of motor steps per real user unit </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00918">918</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5817f705d4fd6a126f8dd3eee38214d1"></a><!-- doxytag: member="pmacAsynCoord.c::pmacSetDefaultCoordSteps" ref="a5817f705d4fd6a126f8dd3eee38214d1" args="(double defaultSteps)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pmacSetDefaultCoordSteps </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>defaultSteps</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function to set default axis scaling factor on all coordinate systems and axes. Call this optionally after calling all the <a class="el" href="pmacAsynCoord_8c.html#a1d55a371bd1c7db792f8ffd8a9beb095">pmacAsynCoordCreate()</a> functions. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>defaultSteps</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00876">876</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aee2c30cf8adda4b89a2d5b09f3efe0ac"></a><!-- doxytag: member="pmacAsynCoord.c::axisName" ref="aee2c30cf8adda4b89a2d5b09f3efe0ac" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="pmacAsynCoord_8c.html#aee2c30cf8adda4b89a2d5b09f3efe0ac">axisName</a>[] = {' ', 'A','B','C','U','V','W','X','Y','Z'}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00140">140</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5a7eb4db04184252e653ecf470969b22"></a><!-- doxytag: member="pmacAsynCoord.c::pmacAsynCoord" ref="a5a7eb4db04184252e653ecf470969b22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">motorAxisDrvSET_t <a class="el" href="pmacAsynCoord_8c.html#a5a7eb4db04184252e653ecf470969b22">pmacAsynCoord</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    15,
    motorAxisReport,            
    motorAxisInit,              
    motorAxisSetLog,            
    motorAxisOpen,              
    motorAxisClose,             
    motorAxisSetCallback,       
    motorAxisSetDouble,         
    motorAxisSetInteger,        
    motorAxisGetDouble,         
    motorAxisGetInteger,        
    motorAxisHome,              
    motorAxisMove,              
    motorAxisVelocityMove,      
    motorAxisStop,              
   motorAxisforceCallback,     
}
</pre></div>
<p>Definition at line <a class="el" href="pmacAsynCoord_8c_source.html#l00083">83</a> of file <a class="el" href="pmacAsynCoord_8c_source.html">pmacAsynCoord.c</a>.</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Aug 3 2012 11:51:56 for pmacCoord by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
